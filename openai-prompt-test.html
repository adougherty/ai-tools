<!DOCTYPE html>
<html>
    <script type="text/javascript">
    //const openaiApiKey = process.env.OPENAI_API_KEY; // Ensure your API key is stored in an environment variable
    const openaiApiKey = "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"

    /* Chat with GPT-3 */
    /*
    const data = {
    model: "gpt-3.5-turbo",
    messages: [
        {
        role: "system",
        content: "You are a helpful assistant."
        },
        {
        role: "user",
        content: "Hello!"
        }
    ]
    };
    */

    const data = {
        "model": "dall-e-3",
        "prompt": "Dr Pepper and Chips",
        "n": 1,
        "size": "1024x1024",
        "style": "vivid",
        "quality": "hd"
    };

    //fetch("https://api.openai.com/v1/chat/completions", {
    fetch("https://api.openai.com/v1/images/generations", {
    method: "POST",
    headers: {
        "Content-Type": "application/json",
        "Authorization": `Bearer ${openaiApiKey}`
    },
    body: JSON.stringify(data)
    })
    .then(response => response.json())
    .then(data => {
        console.log(data);
        document.getElementById("response").innerHTML = "<img src='" + data.data[0].url + "' />"
        document.getElementById("response").innerHTML += '<br/>' + data.data[0].revised_prompt;

    })
    .catch(error => console.error('Error:', error));
    </script>
    <body>
        <div id="response">Making an image of a cute baby otter...</div>
    </body>
</html>